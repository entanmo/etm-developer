# DApp 开发指南（三）

## ——源于大众，归于大众，ETM 投票、优选与分红机制详解

<img src="/images/skill/guide02.jpg" >

自 2008 年比特币的问世，至今不过 11 年，彼时的愿景依然在目，世界却变得完全不同了。

天下熙熙，皆为利来；天下攘攘，皆为利往。从未有一种技术，像区块链这样备受瞩目，由于与金融与生俱来的契合，人们逐利而至，让众多项目脱离的既有的发展轨迹，造成了一种短视的现象：进度远离技术，大众远离核心。诸如 ETH、EOS，已成为了少数人的游戏，去中心化荡然无存。矿场、矿池、超级节点才是其中的玩家，大众已无法从中获得设定的收益。这无疑是一种畸形不健全的生态，而其中的应用无不佐证了这一点。甚至众多项目一直标榜的安全，也越来越得不到保证。

继承了中本聪精神的 ETM 科学家们，认为**算力的堆砌并不能提升系统的安全性，算力的去中心化程度，也就是算力概率分布，才是比特币乃至所有数字货币安全性的核心所在。**而事实也证明了这一点，当资本涌入，矿场盛行，话语权垄断在少数人手中，比特币的安全性反而每况愈下。

## ETM 系统的优势

ETM 始终认为，去中心化是一种新的机制与思维模式，而不单单是一种技术构架。它更是贯穿 ETM 哲学脉络的理念，是通过「分布式系统」（构架）、「源于大众而归于大众的投票、优选与分红机制」（政治）、「UPoS 共识机制」（逻辑）所共同完成的。

相较于传统的系统与机制，去中心化带来了三大优势：

1. **容错**：去中心化系统不会因为某个局部故障而导致整个系统崩溃，由于它依赖于分布式独立工作的设备，整个系统的健壮性得到保障。

2. **阻止攻击**：想要攻击或者操纵去中心化系统的成本更高。去中心化的系统没有一个「中心弱点」，不但因为分布式硬件很难难被集体监测与攻击，其分散于世界各地的团队与用户构建的生态同样增大了攻击的难度。

3. **抵制合谋**：去中心化系统的参与者们很难合谋勾结在一起。合谋本身其实很难界定，在传统系统中，利益驱使寡头们相互勾结，最终受损的是大众。反托拉斯法为此而生，而 ETM 运用纳什均衡也是为了改善整个生态体系的平衡。

## 源于大众而归于大众 的投票、优选与分红机制

对于革命性的区块链而言，同样是在旧机制内部已形成了新机制的因素，而新机制在自身的发展进程中要同传统的观念实行最彻底的决裂。不幸的是，没有去中心化思维的区块链系统已不能够作为新机制的代表，这些项目在区块链技术外表下仍然是传统中心化的脉络。

传统中心化的弊端让人惊醒，ETM 意识到需要构建一个能够抵抗它的协议，其中的重要一环，就是「源于大众而归于大众」的投票、优选与分红机制。

### ETM 投票机制详解

ETM 科学家们，运用数学与哲学上的诸多理论，设计了一套革命性的投票机制，为的就是改变现有格局，还数字货币以本来。

当用户锁仓一定金额 ETM 后，即获得投票资格，锁仓金额并不等于最终投票权益（票数），它要经过一系列的转换 X =u·t·T（其中 T 为锁仓金额，t 为时间增益系数，u 为抑制权益系数），得到最终投票权益 X（票数）。为了让整个系统不被寡头垄断，保证系统的稳定与安全，ETM 在这一系统转换中做了以下几件事：

1. **时间增益**——增加散户机会

<img src="/images/skill/vote_step01.png" style="width:500px" >

散户或者投资新人，在一个稳定的系统中很难获得突出的收益。ETM 为小额投票人设定了时间系数 t 的概念，小额权益（票数）在时间的帮助下，成倍增长，尾部用户也能够突出重围，获得成功。这个时间增益系数每 24 小时自增一次，成功的概率随着时间而增加，而在被投票人成功出块后折半，不影响大的生态平衡。

2. **抑制权益**——降低寡头权重

寡头在聚集大量财富后形成垄断地位，失衡的权重严重打击了大众的积极性。ETM 用上凸函数代替线性增长，甚至指数级增长的权益，让整个生态更为均衡，这个上凸函数就是「抑制权益」系数 u。通过上凸函数，抑制了资本获得超额收益的几率，进一步提高了系统的去中心化程度。

<img src="/images/skill/vote_step02.png" style="width:500px" >

3. **不确定化（概率化）**——0 到 1 的质变

<img src="/images/skill/vote_step03.png" style="width:500px" >

一成不变的榜单是社区失去活力的罪魁祸首，ETM 将矿机入选的形式由按排名选取固定的前 101 名，变为由得票占总票数的比例概率抽选，让排名 101 名以后的矿工也有机会入选，P = X/∑Xn。不确定化带来的是由 0 至 1 的质变，给之前永远无法入选的矿工以希望。

如此一来，整个系统的将根据概率确定矿工，算力也分散到了所有用户手中，使得垄断再无可能。大众只要有占总额 50% 的权益（票数），就必然有 50% 的席位，去中心化得以保证，安全性也得到了极大地提高。

#### 锁仓

不同于证券交易，「锁仓」在 ETM 系统中，仅取其字面意思。对于一个稳定的内部系统而言，既要有一定的流通性，也要预防冲击而保持稳定，为了保护 ETM 生态体系的健康发展与小额用户的权益，用户需要锁定一定额度的 ETM，换取一定额度的投票权益（票数），用以投票选举出矿工。锁仓是投票的前提，用户通过锁仓获取投票资格，这部分金额仍存在于个人账户中，但无法用于任何交易。

#### 投票人

所有 ETM 参与者都是投票人，自动拥有投票的权利。他们与矿工关系密切，决定了矿工节点的入选。

#### 投票

在投票页面，根据矿工的得票与过往业绩，对矿工进行投票，选举出块矿工。

#### 投票权益

投票权益（票数）是每名矿工能否入选出块节点的唯一凭证，它是由该投票人锁仓金额通过权益调整函数换算而来。

#### 入选规则

每轮区块生产，根据矿工所获的的投票权益（票数）占总权益的比例，概率抽选。

![Vote 流程](/images/skill/rule.png)

▲ETM 投票权益（票数）计算流程示意图

### ETM 优选机制详解

如果说革命性的投票机制，带来了安全性与去中心化的提升，那么优选机制的加入，则保证了系统的稳定与高效。

在以往的 DPoS 系统中，投票通常被默认为公平民主而有效的，但这恰恰是最不合理的地方。相对的自由才能保证生态的良好发展，ETM 的优选机制是针对矿工而言的，这个机制会抑制乃至于淘汰那些差的矿工。该矿工的过往表现，赋予矿工一个优选系数 v，v = m/n，其中 m 为成功出块数量，n 为随机到次数。那么一个矿工获得的权益（票数）为 R = v·∑Xn，其中 ∑Xn 是该矿工所有投票人票数之和。而一个矿工的最终入选概率 P = R/∑Rn。

1. m≠0,n≠0 v=m/n
2. m=0,n=0 v=上轮平均值
3. m=0,n≠0 v=1/10*n^2

### ETM 分红机制详解

在 ETM 系统中，矿工与投票人密不可分，每产出一个区块，投票人可以获得一定的投票分红。投票分红奖励占 Token 总量的 5%，共 2500 万枚。在 6 年内分配完毕，逐年递减。

> 6 年内的比例分别为：2.0224%、1.0112%、0.5056%、0.5056%、0.5056%、0.4496。

每个区块投票分红奖励总额的变更时间表如下：

| 奖励     | 里程碑                            |
| -------- | :--------------------------------|
| 1 ETM    | 初始奖励，直到区块高度 10,112,000 |
| 0.5 ETM  | 阶段 1，直到区块高度 20,224,000   |
| 0.25 ETM | 阶段 2，直到区块高度 30,336,000   |
| 0.25 ETM | 阶段 3，直到区块高度 40,448,000   |
| 0.25 ETM | 阶段 4，直到区块高度 50,560,000   |
| 0.26 ETM | 阶段 5，直到区块高度 59,328,000   |

其中，奖励总额中有

- 1/2：给投中入选矿工的投票人，依入选矿工数量分成 101 份后，每名矿工的投票人按票数比例分配
- 1/2：累积一轮后随机选一名入选矿工，该矿工的投票人按票数比例分配

## 源于大众，归于大众

不忘初心，方得始终；而初心易得，始终难求。ETM 希望做一个真正产生价值的区块链系统，解决实际的问题；让大众参与进来，而不是成为少数人的游戏；实现一个真正去中心化的自治社区，让区块链的价值传递成为现实。而 ETM 在投票与分红方面的种种设计，都是为了实现这一最初愿景的，用制度来抵抗寡头与垄断的产生，做到源于大众，归于大众。
